<app-navbar-back></app-navbar-back>

<!-- Sidebar Component -->
<app-sidebar-back></app-sidebar-back>

<div class="container mt-4">
  <div class="card shadow-lg p-4">
    <h2 class="text-primary text-center mb-4">Vehicule Add</h2>
    <div class="offset-md-2 col-md-10">
      <div class="container">
        <form [formGroup]="vehicleForm" (ngSubmit)="onSubmit()">
          <!-- Brand -->
          <div class="form-group mb-3">
            <label for="brand" class="form-label fw-bold">Brand</label>
            <input id="brand" formControlName="brand" class="form-control rounded" required>
            <div *ngIf="vehicleForm.get('brand')?.touched && vehicleForm.get('brand')?.invalid" class="text-danger">
              <small *ngIf="vehicleForm.get('brand')?.errors?.['required']">Brand is required.</small>
              <small *ngIf="vehicleForm.get('brand')?.errors?.['pattern']">Only letters are allowed.</small>
              <small *ngIf="vehicleForm.get('brand')?.errors?.['maxLength']">Max 20 characters allowed.</small>
            </div>
          </div>

          <!-- Model -->
          <div class="form-group mb-3">
            <label for="model" class="form-label fw-bold">Model</label>
            <input id="model" formControlName="model" class="form-control rounded" required>
            <div *ngIf="vehicleForm.get('model')?.touched && vehicleForm.get('model')?.invalid" class="text-danger">
              <small *ngIf="vehicleForm.get('model')?.errors?.['required']">Model is required.</small>
              <small *ngIf="vehicleForm.get('model')?.errors?.['pattern']">Only letters, numbers, and spaces allowed.</small>
              <small *ngIf="vehicleForm.get('model')?.errors?.['maxLength']">Max 20 characters allowed.</small>
            </div>
          </div>

          <!-- Capacity -->
          <div class="form-group mb-3">
            <label for="capacity" class="form-label fw-bold">Capacity</label>
            <input id="capacity" type="number" formControlName="capacity" class="form-control rounded" required>
            <div *ngIf="vehicleForm.get('capacity')?.touched && vehicleForm.get('capacity')?.invalid" class="text-danger">
              <small *ngIf="vehicleForm.get('capacity')?.errors?.['required']">Capacity is required.</small>
              <small *ngIf="vehicleForm.get('capacity')?.errors?.['pattern']">Only numbers allowed.</small>
              <small *ngIf="vehicleForm.get('capacity')?.errors?.['min']">Minimum capacity is 1.</small>
              <small *ngIf="vehicleForm.get('capacity')?.errors?.['max']">Capacity too high.</small>
            </div>
          </div>

          <!-- License Plate -->
          <div class="form-group mb-3">
            <label for="licensePlate" class="form-label fw-bold">License Plate</label>
            <input id="licensePlate" formControlName="licensePlate" class="form-control rounded" required>
            <div *ngIf="vehicleForm.get('licensePlate')?.touched && vehicleForm.get('licensePlate')?.invalid" class="text-danger">
              <small *ngIf="vehicleForm.get('licensePlate')?.errors?.['required']">License plate is required.</small>
              <small *ngIf="vehicleForm.get('licensePlate')?.errors?.['pattern']">Only uppercase letters, numbers, and dashes allowed.</small>
              <small *ngIf="vehicleForm.get('licensePlate')?.errors?.['maxLength']">Max 10 characters allowed.</small>
            </div>
          </div>

          <!-- VIN -->
          <div class="form-group mb-3">
            <label for="vin" class="form-label fw-bold">VIN</label>
            <input id="vin" formControlName="vin" class="form-control rounded" required>
            <div *ngIf="vehicleForm.get('vin')?.touched && vehicleForm.get('vin')?.invalid" class="text-danger">
              <small *ngIf="vehicleForm.get('vin')?.errors?.['required']">VIN is required.</small>
              <small *ngIf="vehicleForm.get('vin')?.errors?.['pattern']">VIN must be exactly 17 characters (letters & numbers).</small>
            </div>
          </div>

          <!-- Fabrication Date -->
          <div class="form-group mb-3">
            <label for="fabricationDate" class="form-label fw-bold">Fabrication Date</label>
            <input id="fabricationDate" type="date" formControlName="fabricationDate" class="form-control rounded" required>
            <div *ngIf="vehicleForm.get('fabricationDate')?.touched && vehicleForm.get('fabricationDate')?.invalid" class="text-danger">
              <small *ngIf="vehicleForm.get('fabricationDate')?.errors?.['required']">Fabrication date is required.</small>
            </div>
          </div>

          <!-- Fuel Type -->
          <div class="form-group mb-3">
            <label for="fuelType" class="form-label fw-bold">Fuel Type</label>
            <input id="fuelType" formControlName="fuelType" class="form-control rounded" required>
            <div *ngIf="vehicleForm.get('fuelType')?.touched && vehicleForm.get('fuelType')?.invalid" class="text-danger">
              <small *ngIf="vehicleForm.get('fuelType')?.errors?.['required']">Fuel type is required.</small>
              <small *ngIf="vehicleForm.get('fuelType')?.errors?.['pattern']">Only letters are allowed.</small>
              <small *ngIf="vehicleForm.get('fuelType')?.errors?.['maxLength']">Max 15 characters allowed.</small>
            </div>
          </div>

          <!-- Registration Document Upload -->
          <div class="form-group mb-3">
            <label for="image">Registration Document</label>
            <input type="file" id="image" class="form-control" (change)="onFileSelected($event)" accept="image/*">
          </div>

          <!-- Vehicle Status Dropdown -->
          <div class="form-group mb-3">
            <label for="vehicleStatus">Vehicle Status</label>
            <select id="vehicleStatus" formControlName="vehicleStatus" class="form-control">
              <option value="" disabled selected>-- Select Vehicle Status --</option>
              <option *ngFor="let status of vehicleStatuses" [value]="status">
                {{ status }}
              </option>
            </select>
          </div>

          <!-- Vehicle Type Dropdown -->
          <div class="form-group mb-3">
            <label for="vehicleType">Vehicle Type</label>
            <select id="vehicleType" formControlName="vehicleType" class="form-control">
              <option value="" disabled selected>-- Select Vehicle Type --</option>
              <option *ngFor="let type of vehicleTypes" [value]="type">
                {{ type }}
              </option>
            </select>
          </div>

          <!-- Vehicle Status Dropdown -->
          <div class="form-group mb-3">
            <label for="vehicleStatusD">Vehicle Add Request</label>
            <select id="vehicleStatusD" formControlName="vehicleStatusD" class="form-control">
              <option value="" disabled selected>-- Select Vehicle add status --</option>
              <option *ngFor="let add_status of vehicleStatusD" [value]="add_status">
                {{ add_status }}
              </option>
            </select>
          </div>




          <!-- Submit Button -->
          <button type="submit" class="btn btn-primary">
            {{ vehicleForm.value.id ? 'Update' : 'Add' }}
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
